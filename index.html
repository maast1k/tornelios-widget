<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>TORNELIOS Widget</title>

  <style>
    :root{
      --bg:#020617;
      --panel:#020f2e;
      --blue:#38bdf8;
      --blue2:#0ea5ff;
      --border:rgba(56,189,248,.25);
      --text:#e5f3ff;
    }
    *{box-sizing:border-box}
    body{margin:0;background:transparent;font-family:Inter,system-ui,-apple-system,sans-serif}

    .widget{
      width: 820px;
      background: linear-gradient(180deg, var(--panel), var(--bg));
      border: 1px solid var(--border);
      border-radius: 22px;
      overflow: hidden;
      color: var(--text);
      position: relative;
      box-shadow: 0 0 40px rgba(14,165,255,.25);
    }

    .header{
      padding: 14px 16px;
      text-align:center;
      font-weight: 1000;
      letter-spacing: .6px;
      background: linear-gradient(90deg, #032e6b, var(--blue2));
      text-shadow: 0 0 14px rgba(56,189,248,.65);
    }

    /* ADMIN BUTTONS */
    .adminBtns{
      position:absolute;
      top:10px;
      right:10px;
      display:none;
      gap:6px;
      z-index:50;
    }
    .adminBtn{
      width:28px;height:28px;
      border-radius:999px;
      background:rgba(7,17,42,.65);
      border:1px solid var(--border);
      color:var(--blue);
      font-weight:900;
      cursor:pointer;
    }

    /* TOP GAMES */
    .gamesRow{
      display:grid;
      grid-template-columns:1fr 70px 1fr;
      gap:10px;
      padding:14px;
    }

    .gameCard{
      background:#020617;
      border:1px solid rgba(56,189,248,.35);
      border-radius:18px;
      height:220px;
      position:relative;
      overflow:hidden;
    }

    .gameCard img{
      width:100%;
      height:100%;
      object-fit:contain;
      padding:14px;
    }

    .gameOverlay{
      position:absolute;
      bottom:10px;
      left:10px;
      right:10px;
      padding:10px;
      background:rgba(2,6,23,.7);
      border-radius:12px;
      text-align:center;
      font-weight:900;
    }

    .vsPillar{
      display:flex;
      align-items:center;
      justify-content:center;
      font-weight:1000;
      color:var(--blue2);
    }

    /* PLAYERS */
    .playersRow{
      display:grid;
      grid-template-columns:1fr 90px 1fr;
      gap:10px;
      padding:14px;
      border-top:1px solid var(--border);
    }

    .playerCard{
      background:#020617;
      border:1px solid rgba(56,189,248,.25);
      border-radius:18px;
      padding:12px;
    }

    .playerTop{
      display:flex;
      justify-content:space-between;
      align-items:center;
    }

    .playerName{
      font-weight:1000;
      color:#fff;
    }

    .total{
      font-size:20px;
      font-weight:1000;
      color:#fff;
    }

    .centerVS{
      display:flex;
      flex-direction:column;
      align-items:center;
      justify-content:center;
      font-weight:900;
      color:var(--blue2);
    }

    /* BOTTOM STATS */
    .bottomStats{
      border-top:1px solid rgba(56,189,248,.2);
      padding:12px;
    }

    .bottomHead,.bottomRow{
      display:grid;
      grid-template-columns:120px 1fr 1fr 1fr 1fr;
      gap:8px;
      align-items:center;
    }

    .bottomHead{
      font-size:10px;
      opacity:.8;
      font-weight:900;
    }

    .bottomRow{
      padding:6px 0;
      border-top:1px solid rgba(56,189,248,.1);
    }

    .who{font-weight:900}
    .val{
      background:rgba(7,17,42,.6);
      border:1px solid rgba(56,189,248,.25);
      border-radius:10px;
      padding:8px;
      text-align:center;
      font-weight:900;
    }

    .footer{
      text-align:center;
      font-size:10px;
      opacity:.6;
      padding:10px;
      border-top:1px solid rgba(56,189,248,.15);
    }

    /* PANELS */
    .panel{
      display:none;
      position:absolute;
      top:60px;
      right:10px;
      width:340px;
      max-height:80vh;
      overflow:auto;
      background:rgba(2,6,23,.95);
      border:1px solid rgba(56,189,248,.3);
      border-radius:16px;
      padding:12px;
      z-index:100;
    }

    .panelHeader{
      display:flex;
      justify-content:space-between;
      margin-bottom:10px;
    }

    .row{display:flex;gap:8px}
    .row>*{flex:1}

    input,select{
      width:100%;
      padding:8px;
      border-radius:10px;
      border:1px solid rgba(56,189,248,.3);
      background:#020617;
      color:#fff;
    }

    .btn{
      margin-top:8px;
      padding:10px;
      border-radius:12px;
      border:none;
      background:var(--blue2);
      font-weight:1000;
      cursor:pointer;
    }

    .btn2{
      margin-top:8px;
      padding:10px;
      border-radius:12px;
      border:1px solid rgba(56,189,248,.3);
      background:#020617;
      font-weight:1000;
      cursor:pointer;
    }

    .gameList{
      max-height:260px;
      overflow:auto;
      margin-top:10px;
    }

    .gameItem{
      display:flex;
      align-items:center;
      gap:10px;
      padding:8px;
      cursor:pointer;
      border-radius:10px;
    }

    .gameItem:hover{background:rgba(7,17,42,.6)}
    .gameItem img{width:40px;height:24px;object-fit:cover}
  </style>
</head>

<body>
<div class="widget">
  <div class="header">TORNELIOS</div>

  <div class="adminBtns" id="adminBtns">
    <button class="adminBtn" id="gamesBtn">ðŸŽ°</button>
    <button class="adminBtn" id="matchBtn">ðŸ§®</button>
  </div>

  <div class="gamesRow">
    <div class="gameCard">
      <img id="gameImgP1">
      <div class="gameOverlay" id="gameNameP1">Select Game</div>
    </div>

    <div class="vsPillar">VS</div>

    <div class="gameCard">
      <img id="gameImgP2">
      <div class="gameOverlay" id="gameNameP2">Select Game</div>
    </div>
  </div>

  <div class="playersRow">
    <div class="playerCard">
      <div class="playerTop">
        <div class="playerName" id="p1Name">Player 1</div>
        <div class="total" id="p1Total">Â£0</div>
      </div>
    </div>

    <div class="centerVS">VS</div>

    <div class="playerCard">
      <div class="playerTop">
        <div class="playerName" id="p2Name">Player 2</div>
        <div class="total" id="p2Total">Â£0</div>
      </div>
    </div>
  </div>

  <div class="bottomStats">
    <div class="bottomHead">
      <div></div><div>BUY 1</div><div>BUY 2</div><div>TOTAL</div><div>MULTI</div>
    </div>

    <div class="bottomRow">
      <div class="who" id="p1Who">P1</div>
      <div class="val" id="p1Buy1">Â£0</div>
      <div class="val" id="p1Buy2">Â£0</div>
      <div class="val" id="p1Win">Â£0</div>
      <div class="val" id="p1X">0x</div>
    </div>

    <div class="bottomRow">
      <div class="who" id="p2Who">P2</div>
      <div class="val" id="p2Buy1">Â£0</div>
      <div class="val" id="p2Buy2">Â£0</div>
      <div class="val" id="p2Win">Â£0</div>
      <div class="val" id="p2X">0x</div>
    </div>
  </div>

  <div class="footer">Twitch 1v1 slot tournament overlay â€¢ Admin hidden unless ?admin=1</div>
</div>

<script>
const isAdmin = location.search.includes("admin");
document.getElementById("adminBtns").style.display = isAdmin ? "flex" : "none";

const state = JSON.parse(localStorage.getItem("tornelios")||"{}") || {};
state.p1 ??= {name:"Player 1",buys:[{b:0,w:0},{b:0,w:0}]};
state.p2 ??= {name:"Player 2",buys:[{b:0,w:0},{b:0,w:0}]};
state.currency ??= "Â£";

function calc(p){
  const b=p.buys[0].b+p.buys[1].b;
  const w=p.buys[0].w+p.buys[1].w;
  return {b,w,x:b? w/b:0};
}

function render(){
  p1Name.textContent=state.p1.name;
  p2Name.textContent=state.p2.name;
  p1Who.textContent=state.p1.name;
  p2Who.textContent=state.p2.name;

  const c1=calc(state.p1);
  const c2=calc(state.p2);

  p1Buy1.textContent=state.currency+state.p1.buys[0].b;
  p1Buy2.textContent=state.currency+state.p1.buys[1].b;
  p1Win.textContent=state.currency+c1.w;
  p1X.textContent=c1.x.toFixed(2)+"x";
  p1Total.textContent=state.currency+c1.w;

  p2Buy1.textContent=state.currency+state.p2.buys[0].b;
  p2Buy2.textContent=state.currency+state.p2.buys[1].b;
  p2Win.textContent=state.currency+c2.w;
  p2X.textContent=c2.x.toFixed(2)+"x";
  p2Total.textContent=state.currency+c2.w;

  localStorage.setItem("tornelios",JSON.stringify(state));
}
render();
</script>
</body>
</html>
